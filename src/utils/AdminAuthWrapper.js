import React from 'react'
import Error from "next/error";
import { useSession } from "next-auth/react";

function AdminAuthWrapper(Component) {
    return function WrappedComponent(props) {
        const {
            data: { user },
        } = useSession();
        if (user.role !== "admin") {
        return (
            <Error
            title="You are not authorized to access this page"
            statusCode={403}
            />
        );
        } else {
        return <Component {...props} user={user} />;
        }
    };
}

export default AdminAuthWrapper